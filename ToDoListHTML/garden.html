<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="garden.css">
    <title>My Garden</title>
</head>

<body>
    <div class="wrapper">
        <div class="screen-backdrop"></div>
        <div class="screen home-screen">
            <a href="main.html">Back to Tasks!</a>
            <div class="welcome">
                <div class="content">
                    <img src="icons/moon.PNG" id="mode">
                    <h1>Hello orbitalms2</h1>
                    <h4>Welcome to your garden!</h4>
                </div>
                <div class="img">
                    <div class="backdrop"></div>
                    <img src="icons/girl-leave.PNG" alt="">
                    <h6> Water DropletsðŸ’§: <span class="score"></span></h6>
                </div>
            </div>
        </div>

        <div class="garden-center">
            <img src="icons/l1seed.PNG" alt="" id="plant-image">
            <button id="water-button">Water the Plant</button>
        </div>
    </div>

    <script src="main.js"></script>
    <script>
        var mode = document.getElementById("mode");
        mode.onclick = function () {
            document.body.classList.toggle("dark-theme");
            if (document.body.classList.contains("dark-theme")) {
                mode.src = "icons/sun.PNG";
            } else {
                mode.src = "icons/moon.PNG";
            }
        }

        var plantImages = [
            "icons/l1seed.PNG",
            "icons/l2seed.PNG",
            "icons/l3seed.PNG",
            "icons/l4seed.PNG",
            "icons/l5seed.PNG",
            "icons/l6seed.PNG"
        ];

        var plantImage = document.getElementById("plant-image");
        var waterButton = document.getElementById("water-button");
        var scoreSpan = document.querySelector(".score");

        var score = parseInt(localStorage.getItem("waterDroplets")) || 0;
        scoreSpan.textContent = score;

        var currentImageIndex = 0;

        waterButton.addEventListener("click", function () {
            if (score > 0) {
                score--;
                localStorage.setItem("waterDroplets", score);
                scoreSpan.textContent = score;
            } else {
                alert("No more water droplets left!");
            }

            // Change the plant image
            currentImageIndex = (currentImageIndex + 1) % plantImages.length;
            plantImage.src = plantImages[currentImageIndex];
        });

        // Ensure the score is consistent across pages
        window.addEventListener("load", function () {
            score = parseInt(localStorage.getItem("waterDroplets")) || 0;
            scoreSpan.textContent = score;
        });
    </script>
</body>

</html>
