<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="garden.css">
    <title>My Garden</title>
</head>

<body>
    <div class="wrapper">
        <div class="screen-backdrop"></div>
        <div class="screen home-screen">
            <a href="main.html">Back to Tasks!</a>
            <div class="welcome">
                <div class="content">
                    <img src="icons/moon.PNG" id="mode">
                    <h1>Hello orbitalms2</h1>
                    <h4>Welcome to your garden!</h4>
                </div>
                <div class="img">
                    <div class="backdrop"></div>
                    <img src="icons/girl-leave.PNG" alt="">
                    <h6> Water DropletsðŸ’§: <span class="score"></span></h6>
                    <h6> Plants Grown: <span class="plants-grown"></span></h6>
                </div>
                <div class="top-right-button">
                    <button id="view-plants-button">View your grown plants!
                    </button>
                </div>
            </div>
        </div>

        <div class="garden-center">
            <img src="" alt="" id="plant-image">
            <button id="water-button">WaterðŸ’§</button>
        </div>
    </div>

    <script src="main.js"></script>
    <script>
        var mode = document.getElementById("mode");
        mode.onclick = function () {
            document.body.classList.toggle("dark-theme");
            if (document.body.classList.contains("dark-theme")) {
                mode.src = "icons/sun.PNG";
            } else {
                mode.src = "icons/moon.PNG";
            }
        }

        var plantImages = [
            "icons/l1seed.PNG",
            "icons/l2seed.PNG",
            "icons/l3seed.PNG",
            "icons/l4seed.PNG",
            "icons/l5seed.PNG",
            "icons/l6seed.PNG"
        ];

        var plantImage = document.getElementById("plant-image");
        var waterButton = document.getElementById("water-button");
        var scoreSpan = document.querySelector(".score");
        var plantsGrownSpan = document.querySelector(".plants-grown");

        var score = parseInt(localStorage.getItem("waterDroplets")) || 0;
        var plantsGrown = parseInt(localStorage.getItem("plantsGrown")) || 0;
        scoreSpan.textContent = score;
        plantsGrownSpan.textContent = plantsGrown;

        var currentImageIndex = parseInt(localStorage.getItem("currentImageIndex")) || 0;
        plantImage.src = plantImages[currentImageIndex];

        waterButton.addEventListener("click", function () {
            if (score > 0) {
                score--;
                localStorage.setItem("waterDroplets", score);
                scoreSpan.textContent = score;

                if (plantImage.src.endsWith("l6seed.PNG")) {
                    plantsGrown++;
                    localStorage.setItem("plantsGrown", plantsGrown);
                    plantsGrownSpan.textContent = plantsGrown;
                }
            } else {
                alert("No more water droplets left!");
            }

            currentImageIndex = (currentImageIndex + 1) % plantImages.length;
            localStorage.setItem("currentImageIndex", currentImageIndex);
            plantImage.src = plantImages[currentImageIndex];
        });

        document.getElementById("view-plants-button").addEventListener("click", function () {
            window.location.href = "plants.html"; // Navigate to plants.html
        });

        window.addEventListener("load", function () {
            score = parseInt(localStorage.getItem("waterDroplets")) || 0;
            plantsGrown = parseInt(localStorage.getItem("plantsGrown")) || 0;
            scoreSpan.textContent = score;
            plantsGrownSpan.textContent = plantsGrown;
        });
    </script>
</body>

</html>